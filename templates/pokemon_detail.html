{% extends 'base.html' %}

{% block title %}{{ data.name }} - Pokémon Detail{% endblock %}

{% block content %}
<h1>#{{ data.id }} {{ data.name }} </h1>
<div class="detail-grid">
    <div class="detail-card__image-section">
        <div class="detail-card__image">
            <img src="{{ data.sprites['other']['official-artwork']['front_default'] }}" alt="{{ data.name }}">
        </div>
    </div>

    <div class="detail-card__info-section">
        <h2 class="detail-card__title">Attributes</h2>
        <ul class="detail-card__item">
            <li class="detail-card__list"><a
                    href="{{ url_for('pokemon.get_species_data', id_or_name=data.species.url.split('/')[-2]) }}">Species
                Detail</a></li>
            <li class="detail-card__list">Base Experience: {{ data.base_experience }}</li>
            <li class="detail-card__list">Height: {{ data.height }}</li>
            <li class="detail-card__list">Weight: {{ data.weight }}</li>
            <li class="detail-card__list">Is Default: {{ data.is_default }}</li>
            <li class="detail-card__list">Order: {{ data.order }}</li>
            </li>
        </ul>
    </div>

    <div class="detail-card__info-section">
        <h2 class="detail-card__title">Abilities</h2>
        <ul class="detail-card__item">
            {% for ability in data.abilities %}
            <li class="detail-card__list">
                <a href="{{ url_for('pokemon.get_ability_data', ability_id=ability.url.split('/')[-2]) }}"> {{
                    ability.name }} </a>
            </li>
            {% endfor %}
        </ul>
    </div>

    <div class="detail-card__info-section">
        <h2 class="detail-card__title">Held items</h2>
        <ul class="detail-card__item">
            {% if data.held_items %}
            {% for item in data.held_items %}
            <li class="item-section__list">
                <a href="{{ url_for('pokemon.get_item_data', id_or_name=item.url.split('/')[-2]) }}"> {{ item.name
                    }} </a>
            </li>
            {% endfor %}
            {% else %}
            None
            {% endif %}
        </ul>
    </div>


</div>
<div class="detail-card__moves-section">
    <h2 class="detail-card__title">Moves</h2>
    <div class="detail-card__moves">
        {% for move in data.moves %}
        <a href="{{ url_for('pokemon.get_move_data', move_id=move.url.split('/')[-2]) }}">{{ move.name }}</a>{% if not
        loop.last %}, {% endif %}
        {% endfor %}
    </div>
</div>
<h2 class="detail-card__title">Evolution Chain:</h2>
<div class="evolution-chain">
    <ul class="evolution-chain__list">
        {% for pokemon in evolution_chain %}
        <li>
            <figure class="evolution-pokemon{% if pokemon.species_name|lower == data.name|lower %}--current{% endif %}">
                <div class="evolution-stage">{{ pokemon.evolution_stage }}</div>
                <img src="{{ pokemon.image_url }}" alt="{{ pokemon.name }} Image">
                <div class="species-name">
                    <a href="{{ url_for('pokemon.get_pokemon', name=pokemon.species_name) }}">{{ pokemon.species_name|title }}</a>
                </div>
            </figure>
        </li>
        {% endfor %}
    </ul>
</div>
<h2 class="detail-card__title">Pokémon Sprites</h2>
<div class="sprite-gallery">
    <ul class="sprite-gallery__list">
        {% for name, url in sprites.items() %}
        <li>
            <figure>
                <img src="{{ url }}" alt="{{ name }}">
                <div class="sprite-name">{{ name|replace("_", " ")|title }}</div>
            </figure>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
